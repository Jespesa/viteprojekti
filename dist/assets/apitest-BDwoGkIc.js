import"./style-CE2F9O3O.js";import{f as l}from"./fetch-DtqXA3eh.js";const p=async()=>{const t=await l("http://localhost:3000/api/items");if(t.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(t)},d=document.querySelector(".info_dialog"),g=document.querySelector(".info_dialog button");g.addEventListener("click",()=>{d.close()});const i=document.getElementById("snackbar"),u=(e,t="")=>{i.innerText=e,i.className=`show ${t}`.trim(),setTimeout(()=>{i.className=i.className.replace("show","").trim()},3e3)},m=async()=>{const e="http://localhost:3000/api/users";let t={};t={Authorization:`Bearer ${localStorage.getItem("token")}`};const s={headers:t};console.log(s);const o=await l(e,s);if(o.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(o);const c=document.querySelector(".tbody");c.innerHTML="",o.forEach(n=>{const r=document.createElement("tr");r.innerHTML=`
        <td>${n.username}</td>
        <td>${n.email}</td>
        <td><button class="check" data-id="${n.user_id}">Info</button></td>
        <td><button class="del" data-id="${n.user_id}">Delete</button></td>
        <td>${n.user_id}</td>
      `,c.appendChild(r)}),h()},h=()=>{const e=document.querySelectorAll(".check");console.log(e),e.forEach(t=>{t.addEventListener("click",async a=>{console.log("Klikkasit nappulaa:",a.target);const s=a.target.dataset.id;console.log("Haetaan tietoja k√§ytt√§j√§lle id:ll√§:",s);const o=await y(s);console.log(o),o&&(d.querySelector("p").innerHTML="",d.showModal(),d.querySelector("p").innerHTML=`
          <div>User ID: <span>${o.user_id}</span></div>
          <div>User Name: <span>${o.username}</span></div>
          <div>Email: <span>${o.email}</span></div>
          <div>Role: <span>${o.user_level}</span></div>`)})})},y=async e=>{const t=await l(`http://localhost:3000/api/users/${e}`);return t.error?(console.error(`Error fetching item with ID ${e}:`,t.error),alert(`Error: ${t.error}`),null):t},k=async e=>{e.preventDefault();const t=document.querySelector("#username").value.trim(),a=document.querySelector("#password").value.trim(),s=document.querySelector("#email").value.trim(),o="http://localhost:3000/api/users",n={body:JSON.stringify({username:t,password:a,email:s}),method:"POST",headers:{"Content-type":"application/json"}};console.log(n);const r=await l(o,n);if(r.error){console.log(r.error),u("Virhe l√§hett√§misess√§, t√§yt√§ kaikki vaadittavat kent√§t!","error");return}r.message&&(console.log(r.message),u("Onnistunut k√§ytt√§j√§n lis√§√§minen :) üíï","success")),console.log(r),document.querySelector(".addform").reset(),m()},v=async()=>{try{const e=await fetch("https://api.chucknorris.io/jokes/random");console.log(e);const t=await e.json();console.log(t),console.log(t.value)}catch(e){console.error("Virhe:",e)}},f=async()=>{console.log("Moikka, maailma"),console.log("Haetaan paikallisesta tiedostosta");const e=document.getElementById("diary");console.log(e);const a=await l("/diary.json");if(a.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(a),e.innerHTML="",a.forEach(s=>{const o=document.createElement("div");o.classList.add("card");const c=document.createElement("div");c.classList.add("card-img");const n=document.createElement("img");n.src="/img/diary.jpg",n.alt="Diary Image",c.appendChild(n);const r=document.createElement("div");r.classList.add("card-diary"),r.innerHTML=`
      <p><strong>Date:</strong> ${s.entry_date}</p>
      <p><strong>Mood:</strong> ${s.mood}</p>
      <p><strong>Weight:</strong> ${s.weight} kg</p>
      <p><strong>Sleep:</strong> ${s.sleep_hours} hours</p>
      <p><strong>Notes:</strong> ${s.notes}</p>
    `,o.appendChild(c),o.appendChild(r),e.appendChild(o)})};document.querySelector("#app").innerHTML=`Moi kirjautunut k√§ytt√§j√§ ${localStorage.getItem("nimi")}`;v();const E=document.querySelector(".get_items");E.addEventListener("click",p);const S=document.querySelector(".get_users");S.addEventListener("click",m);const $=document.querySelector(".formpost");$.addEventListener("click",k);const w=document.querySelector(".get_entries");w.addEventListener("click",f);
